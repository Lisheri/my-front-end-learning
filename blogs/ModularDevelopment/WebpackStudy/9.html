<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>优化生产环境 | 小莫的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/my-front-end-learning/favicon.ico">
    <meta name="description" content="冲">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/my-front-end-learning/assets/css/0.styles.e6d2aca3.css" as="style"><link rel="preload" href="/my-front-end-learning/assets/js/app.58caa9e2.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/3.41cb960d.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/1.a4482675.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/23.f12e7f74.js" as="script"><link rel="prefetch" href="/my-front-end-learning/assets/js/10.de3bf8d5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/100.4268c65b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/101.117b6870.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/102.7de3adaa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/103.67be0dcc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/104.0ae8abcb.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/105.19b75a18.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/106.aaaeeec1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/107.6304f252.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/108.6f2f9126.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/109.16230a89.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/11.fc86166a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/110.4184ed93.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/111.62af0524.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/112.d2b498c5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/113.cc6318e5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/114.8af62719.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/115.f6af4c72.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/116.96fc3b6c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/117.b95515a2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/118.3467c5ee.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/119.42b8db73.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/12.5e34638a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/120.6feca641.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/121.c7240f3b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/122.dadda9d8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/123.adeab7f8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/124.7cfe77e0.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/125.949228d0.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/126.20863ac3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/127.d9bd8190.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/128.2c4912d3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/129.8aa3351b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/13.e6da7590.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/130.001d313c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/131.4344d707.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/132.d7dba17e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/133.80f1fa12.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/134.47382469.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/135.3bb14d57.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/136.cf55c848.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/137.6e665815.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/138.4aa8a23b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/139.d5c74484.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/14.58e7d102.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/140.7b061955.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/141.5a6fe040.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/142.c456f19a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/143.c6c068a5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/144.a8e8a4bc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/145.f64be0a1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/146.212af749.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/147.29f07a5a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/148.a757784b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/149.16a7dee7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/15.3077b46c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/150.fe22a9ad.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/151.5d3662ed.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/152.4ec1197e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/153.76acb3af.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/154.28573615.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/155.0c6bcc6d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/156.50e3abcc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/157.11f6d48a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/158.944d871d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/159.1d5a3293.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/16.f653c52b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/160.38fbf44d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/161.58ae4faf.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/162.0e677517.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/163.256ca688.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/164.9eda6ada.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/165.5aa932d4.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/166.0ed0fa38.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/167.897b2805.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/168.d558af7d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/169.772b8de4.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/17.2102e681.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/170.d25a145f.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/171.affe9da8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/172.6c2cc741.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/173.1e55dcaf.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/174.413e2318.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/175.5885041e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/176.1f48f032.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/177.15df6afe.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/178.a7126a8a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/179.1bc76f0e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/18.cb43a22a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/180.c0a5d543.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/181.b021be3d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/182.87936050.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/183.c012b426.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/184.12622d6b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/185.4627ece8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/186.feed6bb2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/187.32c8ffbe.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/188.d64bb1c4.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/19.1676d227.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/20.d13878b2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/21.5641e352.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/22.bee790fd.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/24.4c26158d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/25.afb19e96.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/26.55ed2264.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/27.035def1a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/28.3cca0007.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/29.236904d1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/30.2f195954.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/31.0c3338a7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/32.0ea3b78c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/33.b6b0a231.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/34.88915e27.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/35.01058cb2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/36.a9c67bc6.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/37.bbf4c104.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/38.60b36584.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/39.6ada89d1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/4.6df316a3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/40.42990103.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/41.e90c9bef.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/42.27b2bb4c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/43.71fa590c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/44.c52aa587.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/45.861ae115.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/46.b3ae61e8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/47.4575a59c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/48.bb88b2fa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/49.fabf1051.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/5.2c9d44f5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/50.980a937a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/51.613c82c5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/52.95f34e52.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/53.34e474d8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/54.c372b467.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/55.c7d7323b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/56.f1441517.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/57.acec45b1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/58.eebe55a6.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/59.80a01b20.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/6.3ee58efa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/60.c9b4061f.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/61.6003b4c8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/62.3ca31ea7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/63.3c210483.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/64.38369672.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/65.e1774067.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/66.bcb91a10.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/67.f81207b2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/68.6596c0c3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/69.d3d18536.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/7.1da8d328.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/70.ed03aafc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/71.f0ef152a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/72.cda24a8f.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/73.bcfe0bd6.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/74.32110622.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/75.8ee7d530.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/76.fbacae16.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/77.91d2d4e9.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/78.582cdde4.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/79.a607c6be.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/8.20ff3afa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/80.625b8f92.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/81.996cce15.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/82.3225c7a9.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/83.0211957a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/84.6e1aff86.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/85.4a658aa8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/86.fb60b3d6.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/87.88f95835.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/88.b838b8fa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/89.7c83559c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/9.a9039aa0.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/90.40a9996d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/91.90bbfffa.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/92.dc002d1a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/93.91b3b0c8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/94.a9769ebb.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/95.1588a508.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/96.493628a7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/97.d74a77ec.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/98.68bb1726.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/99.ed958ca0.js">
    <link rel="stylesheet" href="/my-front-end-learning/assets/css/0.styles.e6d2aca3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>小莫的博客</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>冲</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Lisher</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-front-end-learning/" class="home-link router-link-active"><img src="/my-front-end-learning/logo.png" alt="小莫的博客" class="logo"> <span class="site-name">小莫的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-front-end-learning/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      目录
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ssr基础/" class="nav-link"><i class="undefined"></i>
  ssr基础
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/Gridsome/" class="nav-link"><i class="undefined"></i>
  Gridsome
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ECMAScript6/" class="nav-link"><i class="undefined"></i>
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/函数式编程/" class="nav-link"><i class="undefined"></i>
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS异步编程/" class="nav-link"><i class="undefined"></i>
  JS异步编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端工程化/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端规范化标准/" class="nav-link"><i class="undefined"></i>
  前端规范化标准
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/webpack源码解析/" class="nav-link"><i class="undefined"></i>
  webpack源码解析
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vuex/" class="nav-link"><i class="undefined"></i>
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/微前端/" class="nav-link"><i class="undefined"></i>
  微前端
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/qiankun源码/" class="nav-link"><i class="undefined"></i>
  qiankun源码
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS性能/" class="nav-link"><i class="undefined"></i>
  JS性能
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS类型系统/" class="nav-link"><i class="undefined"></i>
  JS类型系统
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/Vue源码/" class="nav-link"><i class="undefined"></i>
  Vue源码
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vue基础/" class="nav-link"><i class="undefined"></i>
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vue3源码/" class="nav-link"><i class="undefined"></i>
  vue3源码
</a></li></ul></div></div><div class="nav-item"><a href="/my-front-end-learning/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/my-front-end-learning/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Lisheri" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  myGitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/my-front-end-learning/Lisher.jpeg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Lisher
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>177</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>24</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/my-front-end-learning/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      目录
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ssr基础/" class="nav-link"><i class="undefined"></i>
  ssr基础
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/Gridsome/" class="nav-link"><i class="undefined"></i>
  Gridsome
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ECMAScript6/" class="nav-link"><i class="undefined"></i>
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/函数式编程/" class="nav-link"><i class="undefined"></i>
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS异步编程/" class="nav-link"><i class="undefined"></i>
  JS异步编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端工程化/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端规范化标准/" class="nav-link"><i class="undefined"></i>
  前端规范化标准
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/webpack源码解析/" class="nav-link"><i class="undefined"></i>
  webpack源码解析
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vuex/" class="nav-link"><i class="undefined"></i>
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/微前端/" class="nav-link"><i class="undefined"></i>
  微前端
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/qiankun源码/" class="nav-link"><i class="undefined"></i>
  qiankun源码
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS性能/" class="nav-link"><i class="undefined"></i>
  JS性能
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS类型系统/" class="nav-link"><i class="undefined"></i>
  JS类型系统
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/Vue源码/" class="nav-link"><i class="undefined"></i>
  Vue源码
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vue基础/" class="nav-link"><i class="undefined"></i>
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/vue3源码/" class="nav-link"><i class="undefined"></i>
  vue3源码
</a></li></ul></div></div><div class="nav-item"><a href="/my-front-end-learning/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/my-front-end-learning/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Lisheri" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  myGitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模块化开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>webpack打包</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/1.html" class="sidebar-link">模块打包工具</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/2.html" class="sidebar-link">webpack快速上手</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/3.html" class="sidebar-link">webpack资源加载</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/4.html" class="sidebar-link">loader工作原理</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/5.html" class="sidebar-link">webpack-plugin</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/6.html" class="sidebar-link">webpack开发体验</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/7.html" class="sidebar-link">Source Map</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/8.html" class="sidebar-link">模块热更新</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html" aria-current="page" class="active sidebar-link">优化生产环境</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html" class="sidebar-link">生产环境打包构建速度优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Rollup上手</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Parcel上手</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>规范化标准</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack源码阅读</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>优化生产环境</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Lisher</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">优化生产环境</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Lisher</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>5/14/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>模块化</span><span class="tag-item" data-v-1ff7123e>webpack</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="优化生产环境"><a href="#优化生产环境" class="header-anchor">#</a> 优化生产环境</h1> <p>前面所有的开发环境的体验提升, 都会导致生产包变得越来越臃肿</p> <p>这是因为, webpack为了实现这些特性, 会自动往输出结果中, 添加额外代码, 比如<code>Source Map</code>和<code>HMR</code></p> <p>但是这些额外的代码, 对于生产环境来说是冗余的</p> <p>生产环境和开发环境有很大的差异, 生产注重运行效率(需要更少量更轻量的代码)</p> <p>但是开发环境我们更注重方便, 一切为了提高开发效率</p> <p>针对这个问题, webpack4.x提出了<code>模式(mode)</code>, <code>production</code>这个选项就已经做了大量的处理</p> <p>同时webpack也建议为不同的工作环境创建不同的配置, 以便于让打包结果适用于不同环境</p> <h2 id="不同环境下的配置"><a href="#不同环境下的配置" class="header-anchor">#</a> 不同环境下的配置</h2> <p>先尝试为不同的工作环境创建不同的配置</p> <p>方式有两种:</p> <ol><li>配置文件根据环境不同导出不同的配置(process.env可以判断环境)</li> <li>一个环境对应一个配置文件(确保每个环境有一个对应的文件)</li></ol> <h3 id="方式一-配置文件根据环境不同导出不同的配置"><a href="#方式一-配置文件根据环境不同导出不同的配置" class="header-anchor">#</a> 方式一. 配置文件根据环境不同导出不同的配置</h3> <p>webpack配置文件, 支持导出一个函数, 在函数中, 返回配置对象, 接收两个参数, 一个是<code>env</code>, 一个是<code>argv</code></p> <p><code>env</code>是通过cli传递的运行环境名参数</p> <p><code>argv</code>是运行cli过程中所传入的所有参数</p> <p>运行的时候使用<code>yarn webpack --env production</code>, 这就相当于在给webpack传递了一个env的参数, 就是production</p> <p>此时接收到的<code>env</code>就是<code>{ WEBPACK_BUNDLE: true, WEBPACK_BUILD: true, production: true }</code></p> <p>如果是development就是 <code>{ WEBPACK_BUNDLE: true, WEBPACK_BUILD: true, development: true }</code></p> <p>如下所示:</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// 开发模式变量</span>
        entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件, 如果是一个相对路径, 前面的./是不能省略的</span>
        output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// output设置输出文件的配置, 该属性是一个对象</span>
            filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">// 设置输出文件名称</span>
            path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// path执行文件输出所在的目录, 他必须使用绝对路径, 默认就是dist</span>
            <span class="token comment">// publicPath: '/'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        mode<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
        devtool<span class="token operator">:</span> <span class="token string">'eval'</span><span class="token punctuation">,</span>
        module<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 使用loader需要添加具体的配置, 就是在webpack.config.js中添加一个module, 下面配置rules数组</span>
            <span class="token comment">// rules就是针对其他资源的加载规则配置, 每一个规则对象都有两个属性：</span>
            <span class="token comment">// 一个test属性, 是正则表达式, 用于匹配打包过程中所遇到的文件路径</span>
            <span class="token comment">// 一个use属性, 用于表示使用的loader</span>
            rules<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    use<span class="token operator">:</span> <span class="token punctuation">{</span>
                        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                        options<span class="token operator">:</span> <span class="token punctuation">{</span>
                            presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    exclude<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">// 表示匹配所有的.css结尾的文件, 也就是匹配所有的css文件</span>
                    use<span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token comment">// 改成数组后, 配置多个loader, 执行是从后往前执行, 就像一个栈一样, 先进后出, 最先进去的最后执行</span>
                        <span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span>
                    <span class="token punctuation">]</span> <span class="token comment">// cssloader的作用就是将css文件转换成一个js模块, 具体实现就是将css代码转换成字符串push到了一个数组中</span>
                    <span class="token comment">// 但是单纯向上面这样只使用一个css-loader就会发现没有任何代码引用这一串字符串</span>
                    <span class="token comment">// 因此这里还需要一个style-loader, 就是将css的字符串通过style标签放到页面上</span>
                    <span class="token comment">// 通过设置两个loader就会发现 __webpack_modules__下面多了两个模块, 主要代表的就是css-loader和style-loader模块</span>
                    <span class="token comment">// css-loader生成的css字符串, 就通过 insertStyleElement函数 创建一个style标签, 挂载到页面中</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg|png|gif|bmp|jpeg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    use<span class="token operator">:</span> <span class="token punctuation">{</span>
                        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                        <span class="token comment">// 其实所有的loader都可以通过这种方式去配置</span>
                        options<span class="token operator">:</span> <span class="token punctuation">{</span>
                            limit<span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 10kb大小限制, 这样之后大于10kb的依然会使用file-loader</span>
                            <span class="token comment">// 这种方式是默认使用file-loader, 因此一定不要忘了安装file-loader</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    use<span class="token operator">:</span> <span class="token punctuation">{</span>
                        loader<span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
                        options<span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token comment">// attributes: [&quot;img:src&quot;, &quot;a:href&quot;], // 目前已弃用这种方式</span>
                            sources<span class="token operator">:</span> <span class="token punctuation">{</span>
                                list<span class="token operator">:</span> <span class="token punctuation">[</span>
                                    <span class="token punctuation">{</span>
                                        tag<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token comment">// 标签名</span>
                                        attribute<span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token comment">// 挂载标签上的属性名</span>
                                        type<span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token comment">// 属性名对应地原类型</span>
                                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                                <span class="token punctuation">]</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            minimize<span class="token operator">:</span> process<span class="token punctuation">.</span>env <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                            esModule<span class="token operator">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    exclude<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 配置插件的数组</span>
            <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                title<span class="token operator">:</span> <span class="token string">'webpack学习'</span><span class="token punctuation">,</span>
                filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
                template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
                inject<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
                <span class="token comment">// meta: {</span>
                <span class="token comment">//     viewport: 'width=device-width'</span>
                <span class="token comment">// }</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// new CopyWebpackPlugin({</span>
            <span class="token comment">//     patterns: [</span>
            <span class="token comment">//         { from: &quot;src/favicons&quot;, to: &quot;dest&quot; },</span>
            <span class="token comment">//     ],</span>
            <span class="token comment">// }),</span>
            <span class="token keyword">new</span> <span class="token class-name">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
            http2<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// open: true,</span>
            <span class="token comment">// https: true,</span>
            contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>
                path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/favicons'</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 可以是字符串, 也可以是数组</span>
            proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 也就是说请求 localhost:3000/api/users -&gt; https://api.github.com/api/users</span>
                    target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
                    <span class="token comment">// 但是在https://api.github.com的接口中并没有/api, 因此需要添加一层代理路径的重写</span>
                    pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 这个属性最终会生成一个正则去匹配上面的路径</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token comment">// ws: true,</span>
                    <span class="token comment">// timeout: 9999999999,</span>
                    <span class="token comment">// 不能使用localhost:3000作为请求 github 的主机名</span>
                    <span class="token comment">// 主机名由于服务端判断请求应该走哪一个网站, 设置changeOrigin为true, 就会将代理请求作为实际的主机名去请求</span>
                    changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// env.production 已经不再是以前那种直接就是值了, 而是确定下面的production是否为true</span>
        console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>
        config<span class="token punctuation">.</span>mode <span class="token operator">=</span> <span class="token string">'production'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token operator">...</span>config<span class="token punctuation">.</span>plugins<span class="token punctuation">,</span>
            <span class="token comment">// 这里添加clean-webpack-plugin和copy-webpack-plugin, 这两个就是之前说的开发阶段可以省略的插件</span>
            <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;src/favicons&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&quot;dest&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br></div></div><p>当然, 也可以在全局做判断, 根据不同的环境, 导出不同的配置</p> <h3 id="方式二-不同环境对应不同的配置文件"><a href="#方式二-不同环境对应不同的配置文件" class="header-anchor">#</a> 方式二. 不同环境对应不同的配置文件</h3> <p>方式一只适合中小型项目, 如果一旦项目变得复杂, 那么配置文件也会一起变得复杂起来</p> <p>一般我们都有三个webpack配置文件, 其中有两个用于适配不同的环境, 另一个是公共配置, 因为开发和生产, 并不是所有的都不同</p> <p>生产和开发需要合并common的配置, 这里使用<code>webpack-merge</code>这个模块提供的<code>merge</code>函数, 毕竟使用原生方法, 对于引用类型的合并不好操作(当然也可以自己写一个, 也可以使用lodash.merge函数)</p> <p>并且在使用的时候要使用<code>--config webpack.prod.js</code>去指定对应的配置文件</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// common</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 载入HtmlWebpackPlugin, 他不需要解构, 默认导出就是</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">myPlugin</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义一个类, 然后定义一个apply方法</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// apply方法会在webpack启用时, 自动被调用</span>
        <span class="token comment">// 接收一个compiler对象参数, 这个对象就是webpack工作过程中的核心对象, 包含了此次构建的所有配置信息, 也是通过这个对象去注册钩子函数</span>
        <span class="token comment">// 这里编写一个插件用于去除打包过程后bundle.js下所有的注释, 因此, 这个过程应该是在bundle.js出现后实施</span>
        <span class="token comment">// emit在 输出 asset 到 output 目录之前执行(就是即将往输出目录输出文件)</span>
        <span class="token comment">// ! 通过compiler.hooks.emit去访问到这个钩子, 通过tap方法去注册函数</span>
        <span class="token comment">// ! tap方法接收两个参数, 第一个是插件名称, 第二个就是挂载到这个钩子上的函数了</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;myPlugin&quot;</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// * compilation这个对象可以理解成此次打包过程中的上下文, 打包结果都会放到这个对象中</span>
            <span class="token comment">// assets是即将写入目录中的资源文件信息, 是一个对象, 键名是文件的名称</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">in</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 通过source方法可以拿到对应地内容</span>
                <span class="token comment">// 需求是做一个去除bundle.js注释的插件, 因此要判断文件名</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// console.info(compilation.assets[name].source())</span>
                    <span class="token comment">// 然后进行处理</span>
                    <span class="token keyword">const</span> contents <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">const</span> withoutComments <span class="token operator">=</span> contents<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/\*\*+\*\/</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 处理完成后, 需要去替换compilation.assets下的对应地内容</span>
                    compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                        <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> withoutComments<span class="token punctuation">,</span> <span class="token comment">// 依然使用一个source方法去暴露</span>
                        <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> withoutComments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token comment">// 还需要一个size方法, 去返回一个内容的大小, 这个是webpack要求的所必须的方法</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开发模式变量</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件, 如果是一个相对路径, 前面的./是不能省略的</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// output设置输出文件的配置, 该属性是一个对象</span>
        filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">// 设置输出文件名称</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// path执行文件输出所在的目录, 他必须使用绝对路径, 默认就是dist</span>
        <span class="token comment">// publicPath: '/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    devtool<span class="token operator">:</span> <span class="token string">'eval'</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                use<span class="token operator">:</span> <span class="token punctuation">{</span>
                    loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span> <span class="token punctuation">{</span>
                        presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                use<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg|png|gif|bmp|jpeg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                use<span class="token operator">:</span> <span class="token punctuation">{</span>
                    loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span> <span class="token punctuation">{</span>
                        limit<span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                use<span class="token operator">:</span> <span class="token punctuation">{</span>
                    loader<span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token comment">// attributes: [&quot;img:src&quot;, &quot;a:href&quot;], // 目前已弃用这种方式</span>
                        sources<span class="token operator">:</span> <span class="token punctuation">{</span>
                            list<span class="token operator">:</span> <span class="token punctuation">[</span>
                                <span class="token punctuation">{</span>
                                    tag<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token comment">// 标签名</span>
                                    attribute<span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token comment">// 挂载标签上的属性名</span>
                                    type<span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token comment">// 属性名对应地原类型</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        minimize<span class="token operator">:</span> process<span class="token punctuation">.</span>env <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        esModule<span class="token operator">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                exclude<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 配置插件的数组</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'webpack学习'</span><span class="token punctuation">,</span>
            filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
            template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
            inject<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        http2<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// open: true,</span>
        <span class="token comment">// https: true,</span>
        contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>
            path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/favicons'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 可以是字符串, 也可以是数组</span>
        proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 也就是说请求 localhost:3000/api/users -&gt; https://api.github.com/api/users</span>
                target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
                <span class="token comment">// 但是在https://api.github.com的接口中并没有/api, 因此需要添加一层代理路径的重写</span>
                pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 这个属性最终会生成一个正则去匹配上面的路径</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// ws: true,</span>
                <span class="token comment">// timeout: 9999999999,</span>
                <span class="token comment">// 不能使用localhost:3000作为请求 github 的主机名</span>
                <span class="token comment">// 主机名由于服务端判断请求应该走哪一个网站, 设置changeOrigin为true, 就会将代理请求作为实际的主机名去请求</span>
                changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// prod</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这个模块解构出来一个CleanWebpackPlugin, 就是用于清除dist目录的插件</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用Object.assign会后项完全覆盖前项相同键名的属性, 但是对于引用类型, 我们只希望做添加, 而不是完全覆盖</span>
<span class="token comment">// 所以Object.assign并不合适, 可以使用lodash.merge, 不过社区中提供了专用的webpackMerge这个库</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;src/favicons&quot;</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&quot;dest&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    devtool<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br></div></div><h2 id="defineplugin"><a href="#defineplugin" class="header-anchor">#</a> DefinePlugin</h2> <p>webpack4新增了很多开箱即用优化配置, 用起来很爽, 但是要了解原理, 会让我们无从下手, 因此如果我们要深入了解, 还是要单独研究一下背后的作用</p> <p>第一个就是这个插件<code>DefinePlugin</code></p> <p>为代码注入全局成员, 这个东西默认会启用起来, 并且注入了一个叫做<code>process.env.NODE_ENV</code>的变量, 很多模块都是通用这个成员去判断运行环境, 决定是否执行打印日志等操作</p> <p>这个插件的构造函数接收一个对象, 对象的每一个键值, 都是往process.env中注入的东西</p> <p>使用如下:</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token comment">// 注入api服务地址</span>
   <span class="token constant">API_BASE_URL</span><span class="token operator">:</span> <span class="token string">'https://api.example.com'</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>找到打包结果, 可以发现他其实就是把注入成员的值, 直接替换到了代码中</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token constant">API_BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// bundle.js</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>会发现有点问题, 因为没有引号了, 因为他要求的实际上是传递一段js的代码片段, 并不是用于传值的</p> <p>需要修改为 <code>API_BASE_URL: '&quot;https://api.example.com&quot;'</code></p> <p>当然, 如果要传值, 最好的方式还是使用<code>JSON.stringify()</code>处理一波</p> <blockquote><p>结论: 有了这个插件, 我们可以注入任何我们想要的一些特殊字段</p></blockquote> <h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree-shaking</h2> <p>字面意思就是摇树，伴随这一个摇树的动作, 树上的枯树枝等就会落下来</p> <p>这里的tree-shaking就是<code>摇掉</code>代码中未引用的部分</p> <p>这部分代码有一个专业术语叫做<code>未引用代码(dead-code)</code></p> <p>他可以自动检测出未引用的代码, 并移除他们</p> <p>这个功能会在生产环境下自动开启</p> <h3 id="使用tree-shaking"><a href="#使用tree-shaking" class="header-anchor">#</a> 使用tree-shaking</h3> <p>需要注意的是, tree shaking不是指某个配置选项, 他是一组功能搭配使用过后的效果, 这个功能会在production模式下自动开启</p> <p>如果在其他模式下手动开启tree-shaking</p> <p>可以添加一个<code>optimization</code>属性， 这个属性就是集中配置webpack中优化功能的属性</p> <p>我们只需要配置两个成员, <code>usedExports</code>用于标记未使用的成员, <code>minimize</code>压缩代码(去除未使用的成员)</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code>optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以将<code>usedExports</code>比作标记枯树枝, <code>minimize</code>负责「摇掉」他们</p> <h2 id="webpack合并模块"><a href="#webpack合并模块" class="header-anchor">#</a> webpack合并模块</h2> <p>除了<code>usedExports</code>以外, 还可以使用<code>concatenateModules</code>继续优化输出, 普通的打包结果, 是将每一个模块单独放在一个函数当中, 也就是说如果我们的模块很多, 也就意味着我们在输出结果中会有很多这样的模块函数</p> <p>先对上面的配置做修改</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code>optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// minimize: true</span>
    concatenateModules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>该属性尽可能的将所有模块全部合并到一起输出到一个函数中, 及提升了运行效率, 又减少了代码的体积</p> <p>这个特性叫做Scope Hoisting(作用域提升), webpack3.x新增</p> <h2 id="tree-shaking-babel"><a href="#tree-shaking-babel" class="header-anchor">#</a> Tree-shaking&amp;Babel</h2> <p>有些东西根据版本的不同, 变化较大, 对于<code>Tree-shaking</code>来说更是如此, 有的说配置了Babel之后, Tree-shaking会失效</p> <p>其还是Tree-shaking的实现, 前提是必须使用ES Module, 由Webpack打包的代码必须使用ESM</p> <p>webpack在打包模块之前, 现将模块交给loader去处理, 然后再将所有loader处理的结果, 打包到一起</p> <p>为了转换代码中的ECMAScript的新特性, 很多时候我们都会选择<code>babel-loader</code>处理JS, 而babel处理js代码的过程中, 就看会把<code>ES MOdules</code>转换为<code>CommonJS</code>, 具体要看有没有转换插件</p> <p>比如上面使用的<code>@babel/preset-env</code>这个插件, 一般来说, 使用之后, preset-env就会将代码中的ES Module转换为CommonJS, 那webpack在此打包时, 拿到的就是CommonJS组织的代码, 那么tree-shaking就会失效</p> <p>但实际上, 我们的tree-shaking并没有失效</p> <p>实际上就是在最新版本的babel-loader中, 就关闭了ESModule转换为CommonJS这个功能</p> <p>如下:</p> <p>这里就标识了babel支持ES Modules</p> <p><img src="/my-front-end-learning/assets/img/babel.1832885a.jpg" alt="babel中支持ESModule的部分"></p> <p><img src="/my-front-end-learning/assets/img/preset-env.35aebef4.jpg" alt="preset-env中关于ESM的标识"></p> <p>因此, 最新版的babel-loader, 会根据配置去看是否转换, 默认是根据环境识别, 所以webpack打包的时候, 还是ES Module的代码</p> <p>其实也可以通过配置去控制, 如下配置preset-env</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code>use<span class="token operator">:</span> <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
        presets<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> modules<span class="token operator">:</span> <span class="token string">'commonjs'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这样就强制转换成commonJS了</p> <p>一般情况下这里是这样<code>[&quot;@babel/preset-env&quot;, { modules: 'auto' }]</code>, 就是交给环境去判断</p> <p>因此, 最新版本的babel-loader, 并不会导致esmodule失效</p> <h2 id="sideeffects-副作用"><a href="#sideeffects-副作用" class="header-anchor">#</a> sideEffects(副作用)</h2> <p>webpack4.x新增内容, 可以通过配置的方式去标识代码是否有副作用, 从而为tree-shaking压缩更大的空间</p> <p>副作用: 模块执行时除了导出成员之外所做的事情</p> <p>sideEffects一般用于npm包标记是否有副作用</p> <p>由于官网中将sideEffects的介绍和tree-shaking混到了一起, 所以很多人以为他们关系很紧密, 实际上他们没有什么关系</p> <p>比如这样一个场景</p> <p>一个components下面有一个index.js文件, 然后所有的导出都经过index.js统一设置一个出口</p> <p>但是我们使用的时候, 只想要其中一个, 并且也只引入了其中一个, 但是打包出来的结果确实其他所有的都会被执行, 毕竟esModue导入时会执行整个文件</p> <p>那么<code>sideEffects</code>就是用来解决这类问题</p> <p>直接在optimization属性中开启这个属性<code>sideEffects</code></p> <p>(这个属性生产环境打包模式自动开启)</p> <p>开启之后, webpack在打包的时候, 会先检查当前代码所属的package.json中有没有<code>sideEffects</code>的标识, 以此来判断这个模块有没有副作用, 如果没有, 那么这些没有用到的模块, 就不会被打包</p> <p>因此, 要先设置<code>package.json</code>中添加一个<code>sideEffects: false</code></p> <p><code>package.json</code>中的用于标识代码没有副作用</p> <p><code>optimization</code>中的是用于开启这个功能</p> <p>他们不是一个意思</p> <h3 id="sideeffects注意"><a href="#sideeffects注意" class="header-anchor">#</a> sideEffects注意</h3> <p>使用它的前提就是: <code>一定要确保代码真的没有副作用</code>, 否则webpack打包的时候, 就会误删有副作用的代码</p> <p>比如基于原型的扩展方法:</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// extend.js模块</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">pad</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后导入这个模块的时候, 他并不需要导入任何成员, 仅仅扩展Number, 并且这个就是副作用</p> <p>如果还是要求没有任何副作用, 就要出事, 因为他会被移除</p> <p>解决办法就是, package.json中关闭副作用, 或者标识有副作用的模块</p> <p>如下</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;./src/extend.js&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;*.css&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>即可忽略内部声明模块的副作用, webpack不会把他处理掉</p> <h2 id="code-splitting-代码分割"><a href="#code-splitting-代码分割" class="header-anchor">#</a> Code Splitting(代码分割)</h2> <p>通过webpack实现前端项目,整体模块化的优势固然明显, 但是所有的代码打包在一起, 当项目特别大的时候, bundle的体积就会变得非常庞大, 很多时候超过3MB甚至30MB都是非常常见的事情</p> <p>但是事实情况就是<code>并不是每个模块在启动时都是必要的</code></p> <p>但是这些模块又被全部打包到了一起, 那么我们需要任何一个模块, 都必须把项目整体打包下来才能使用</p> <p>而我们的应用一般又是运行在浏览器端, 那么意味着, 我们会浪费掉很多的流量或者带宽</p> <p>因此, 更为合理的需求, 就是将我们的bundle, 按照一定的规则, 分离到多个bundle当中, 然后根据应用的运行需要按需加载这些模块, 这样我们的应用的响应速度和运行效率, 就会大大提高</p> <p>但是这里有一个问题: <code>期初就有一个说法, 说的是webpack主要是将散落的模块, 合并到一起, 从而去提高运行效率。但是这里又说要分开, 是否自相矛盾呢？</code></p> <h3 id="结论"><a href="#结论" class="header-anchor">#</a> 结论：</h3> <blockquote><p>其实这并不是矛盾, 只是物极必反而已, 资源太大了也不行, 太碎了, 也不行。毕竟项目中划分的模块颗粒度一般会非常的细, 很多时候, 一个模块只是提供了一个小小的工具函数, 它并不能形成一个完整的功能单元</p> <p>如果不把散落的模块合并到一起, 那么很可能运行一个小小的功能时, 就会加载非常多的模块</p> <p>并且在HTTP1.1版本, 本身有非常多的缺陷, 比如我们不能对同域名下的并行发起很多次的请求(HTTP1.1并发请求需要建立更多的TCP链接, 以chrome为例, 限制是最大六个链接并发)</p> <p>而且每一次请求会有一定延迟</p> <p>请求的Header浪费带宽流量</p> <p>综上所述, 模块打包是必要的</p> <p>当然, 随着HTTP2不断地流行, 多路复用的情况下, 允许我们任意并发请求, 这个时候, 可以渐渐的放开模块细粒度(甚至出现了像是vite2.0这类开发环境直接不打包的新时代构建工具)</p></blockquote> <h3 id="处理"><a href="#处理" class="header-anchor">#</a> 处理</h3> <p>为了解决上面的矛盾点, webpack出了一种支持分包的功能, 可以称为<code>代码分割</code></p> <p>他通过我们设定的规则, 将模块打包到不同的bundle当中, 从而去提高应用的响应速度</p> <p>目前实现分包的方式主要有两种,</p> <ol><li>根据业务的不同, 配置不同的打包入口, 也就是所谓的<code>多入口打包</code></li> <li>使用<code>ES Module的动态导入</code></li></ol> <h2 id="多入口打包"><a href="#多入口打包" class="header-anchor">#</a> 多入口打包</h2> <p>多入口打包一般适合传统的多页面应用程序(MPA), 最常见的划分规则, 就是一个页面对应一个打包入口， 对于不同页面, 公共部分单独提取到公共结果当中</p> <p>如果需要多个入口, 就可以把<code>entry</code>定义为一个对象, <code>(如果是数组的话, 会把多个文件打包到一起, 对于整个项目来说还是一个入口)</code>, 对象的键名是入口的名称, 值就是入口对应的文件路径</p> <p>输出的文件名, 也需要修改, 因此这里要给output.filename做修改, 给他换成<code>[name].bundle.js</code>, 这里的<code>[name]</code>, 就会根据入口动态生成</p> <p>同时为了防止打包结果被每一个页面同时载入, 需要配置多个 HtmlWebpackPlugin的实例, 表示不同的页面, 去设置<code>chunks</code>, 用以载入不同的模块(如果不设置, 他默认就是载入所有的打包结果)</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">'./src/album.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'Multi Entry'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'Multi Entry'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">'./src/album.html'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'album.html'</span><span class="token punctuation">,</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="提取公共模块-split-chunks"><a href="#提取公共模块-split-chunks" class="header-anchor">#</a> 提取公共模块(split chunks)</h2> <p>有一个小问题, 就是在不同入口中肯定会有公共模块</p> <p>按照上述的方式, 在不同的打包入口中, 可能会有相同的部分出现, 就是他们的公共模块</p> <p>如果公共的模块很大, 那么打包出来的影响就会特别大, 重复很多</p> <p>其实优化公共模块的方法很简单, 就是在<code>optimization</code>中添加<code>chunks</code>属性, 如果设置成<code>all</code>, 就表示会把所有的公共模块都提取到bundle当中</p> <p>这时候就会生成一个额外的文件, 他就是两个入口公共的部分了</p> <h2 id="动态导入-按需加载"><a href="#动态导入-按需加载" class="header-anchor">#</a> 动态导入(按需加载)</h2> <p>常说的按需加载, 指的是加载数据</p> <p>但是这里的<code>按需加载</code>是指需要用到某个模块时, 再加载这个模块, 可以极大的节省带宽和流量</p> <p>webpack中支持动态导入的方式, 来实现模块的按需加载, 而且所有动态导入的模块, 会被自动分包</p> <p>分包的目的, 有一点很重要就是让模块实现按需加载, 从而提高应用的响应速度</p> <p>在需要导入组件的地方, 通过<code>import('路径')</code>这种方式, 返回一个promise, then中的值, 就是他的模块对象, 如下：</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 动态导入</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>hash <span class="token operator">===</span> <span class="token string">&quot;#posts&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 拿到成员后解构出来, 放到posts变量中</span>
    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./ports/posts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token operator">:</span> posts<span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        mainElement<span class="token punctuation">.</span><span class="token function">addpendChild</span><span class="token punctuation">(</span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这样以后的打包文件, 就会自动导入, 动态分包</p> <p>整个过程不需要任何配置, 只需要使用<code>ES Module</code>的动态导入即可, webpack会自己处理</p> <h2 id="魔法注释"><a href="#魔法注释" class="header-anchor">#</a> 魔法注释</h2> <p>默认通过动态导入打包出来的bundle文件, 他的名称只是一个序号, 这其实并没有什么不好, 因为在生产中, 不需要关心名称是什么</p> <p>如果还是想要命名, 那么可以使用webpack的魔法注释</p> <p>就是通过如下所示的注释方式, 在<code>import</code>的时候路径前面给出注释, 打包出来就有名字了</p> <p>如果chunk的name相同, 那么相同的chunk name最终会被打包到一起</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'posts' */</span><span class="token string">'./posts/post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token operator">:</span> posts<span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    mainElement<span class="token punctuation">.</span><span class="token function">addpendChild</span><span class="token punctuation">(</span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="minicssextractplugin"><a href="#minicssextractplugin" class="header-anchor">#</a> MiniCssExtractPlugin</h2> <p>MiniCssExtractPlugin是一个可以将CSS代码从打包结果中提取出来的插件, 通过它, 我们可以实现CSS模块的按需加载</p> <p>直接<code>yarn add mini-css-extract-plugin</code>, 然后导入进webpack模块, 导出的就是plugin本身, 然后在plugins下创建一个实例即可</p> <p>除此之外, 目前所使用的样式模块, 都是先交给css-loader去解析, 然后再交给style-loader去处理, 它的作用就是将css代码, 通过style标签的方式, 注入页面中, 从而使样式可以工作</p> <p>但是使用<code>MiniCssExtractPlugin</code>, 样式会单独存放到文件中, 不需要style标签, 而是直接通过link去引入, 这里就不需要使用style-loader, 而是使用<code>MiniCssExtractPlugin</code>提供的一个插件, 给他注入</p> <p>如下:</p> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 'style-loader',  // 使用MiniCssExtractPlugin就用不上他了, 不需要注入style标签的方式, 而是直接link</span>
        MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span>
    <span class="token punctuation">]</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当然, 如果css并不是很大, 这样没有必要, 一般css超过50kb, 才考虑是否单独提出来, 否则的话, 减少一次请求, 效果可能更好(当然HTTP2, 没有这种顾虑)</p> <h2 id="optimizecssassetswebpackplugin-压缩输出的css文件"><a href="#optimizecssassetswebpackplugin-压缩输出的css文件" class="header-anchor">#</a> OptimizeCssAssetsWebpackPlugin(压缩输出的CSS文件)</h2> <p>使用<code>MiniCssExtractPlugin</code>过后, 样式文件就可以被单独的提取到css文件中了, 但是这里同样有一个小问题, 这里尝试以生产模式去打包, 按照之前的了解, 在生产模式下, webpack会自动去压缩输出的结果</p> <p>但是我们会发现, 样式文件, 没有压缩css文件, 这是因为webpack默认只会压缩js代码, 并不会处理其他文件</p> <p>这里我们需要一个<code>optimize-css-assets-webpack-plugin</code>这个插件用于压缩样式文件</p> <p>这样就会发现, 他就被压缩了</p> <p>不过有一点, 官方文档中, 他其实并不是添加在plugins数组下的, 而是配置在<code>optimization</code>属性中的<code>minimizer</code>性数组中</p> <p>其实如果将插件配置在plugins数组中, 那么所有的地方, 都会工作, 但是配置在<code>minimizer</code>数组中, 我们可以通过压缩功能的开启关闭去控制他</p> <p>这样只要不开启压缩, 那么他就不会被压缩</p> <p>但是这样配置, 就需要将js的压缩, 也放进来</p> <p>内置压缩插件叫做<code>terser-webpack-plugin</code></p> <h2 id="webpack输出文件名hash"><a href="#webpack输出文件名hash" class="header-anchor">#</a> webpack输出文件名Hash</h2> <p>一般部署前端文件时, 都会启用服务器的静态资源缓存(CDN分发, 走CDN缓存), 这样对用户的浏览器而言, 就可以缓存静态资源, 这样他就不用去请求了, 节约大量时间</p> <p>但是开启客户端缓存, 也有不小的问题, 比如过期时间太短, 不好控制, 太长, 不容易更新到客户端</p> <p>为了解决上述问题, 我们将为输出文件名提供一个hash后缀, 然后将强缓存设置<code>cache-control</code>下的<code>max-age</code>设置为一年</p> <p>然后每一次更新, 就上传最新的文件名(不同CDN有不同文件数量的限制, 满了清一下就好)</p> <p>这样每一次新的文件名, 就是全新的请求</p> <p>解决方案: <code>生产环境下, 文件名使用Hash</code></p> <p>webpack中的<code>filename</code>和大多数插件的filename属性一样, 都支持通过占位符的方式, 给文件名设置Hash</p> <p>不过他们支持三种Hash, 效果不尽相同</p> <ol><li>最普通的, 他是整个项目级别的, 一旦项目中有任何一个地方, 发生改动那么这一次打包过程中的hash值都会发生变化
<ul><li>这个就造成了有一个地方修改, 所有的hash都刷新了</li></ul></li></ol> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> filename <span class="token operator">=</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name]-[hash].bundle.js'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>chunkHash, chunk级别, 打包过程中, 同一个级别的都会单独打包 (不同的chunk, 就是一路, 比如多入口以及他们的公共模块, 就是一个入口对应一个chunk, 公共模块对应一个chunk)
<ul><li>比上面的好一点, 但是联动的文件还是太多, 毕竟一个chunk下面起码都是一个js一个css, 甚至更多, 一次修改, 他们都会联动改变</li> <li>同时入口文件(引入他们的), 也会改变</li></ul></li></ol> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> filename <span class="token operator">=</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name]-[chunkhash].bundle.js'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>contenthash, 文件级别的hash, 根据输出文件的内容生成的hash, 不同的文件, 就有不同的hash</li></ol> <div class="language-javaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> filename <span class="token operator">=</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name]-[contenthash].bundle.js'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>相比于前两个, 最好的其实就是contenthash, 因为他精确定位到了文件级别, 只有文件变化, 他才会更新掉文件名</p> <p>另外, 如果hash长度太长, 我们通过在hash名的后面用<code>:+长度</code>可以指定hash指定长度, 比如<code>contenthash:8</code>, 就是8位hash</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/28/2022, 2:49:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/8.html" class="prev">
            模块热更新
          </a></span> <span class="next"><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html">
            生产环境打包构建速度优化
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#不同环境下的配置" class="sidebar-link reco-side-不同环境下的配置" data-v-70334359>不同环境下的配置</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#方式一-配置文件根据环境不同导出不同的配置" class="sidebar-link reco-side-方式一-配置文件根据环境不同导出不同的配置" data-v-70334359>方式一. 配置文件根据环境不同导出不同的配置</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#方式二-不同环境对应不同的配置文件" class="sidebar-link reco-side-方式二-不同环境对应不同的配置文件" data-v-70334359>方式二. 不同环境对应不同的配置文件</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#defineplugin" class="sidebar-link reco-side-defineplugin" data-v-70334359>DefinePlugin</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#tree-shaking" class="sidebar-link reco-side-tree-shaking" data-v-70334359>Tree-shaking</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#使用tree-shaking" class="sidebar-link reco-side-使用tree-shaking" data-v-70334359>使用tree-shaking</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#webpack合并模块" class="sidebar-link reco-side-webpack合并模块" data-v-70334359>webpack合并模块</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#tree-shaking-babel" class="sidebar-link reco-side-tree-shaking-babel" data-v-70334359>Tree-shaking&amp;Babel</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#sideeffects-副作用" class="sidebar-link reco-side-sideeffects-副作用" data-v-70334359>sideEffects(副作用)</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#sideeffects注意" class="sidebar-link reco-side-sideeffects注意" data-v-70334359>sideEffects注意</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#code-splitting-代码分割" class="sidebar-link reco-side-code-splitting-代码分割" data-v-70334359>Code Splitting(代码分割)</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#结论" class="sidebar-link reco-side-结论" data-v-70334359>结论：</a></li><li class="level-3" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#处理" class="sidebar-link reco-side-处理" data-v-70334359>处理</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#多入口打包" class="sidebar-link reco-side-多入口打包" data-v-70334359>多入口打包</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#提取公共模块-split-chunks" class="sidebar-link reco-side-提取公共模块-split-chunks" data-v-70334359>提取公共模块(split chunks)</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#动态导入-按需加载" class="sidebar-link reco-side-动态导入-按需加载" data-v-70334359>动态导入(按需加载)</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#魔法注释" class="sidebar-link reco-side-魔法注释" data-v-70334359>魔法注释</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#minicssextractplugin" class="sidebar-link reco-side-minicssextractplugin" data-v-70334359>MiniCssExtractPlugin</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#optimizecssassetswebpackplugin-压缩输出的css文件" class="sidebar-link reco-side-optimizecssassetswebpackplugin-压缩输出的css文件" data-v-70334359>OptimizeCssAssetsWebpackPlugin(压缩输出的CSS文件)</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html#webpack输出文件名hash" class="sidebar-link reco-side-webpack输出文件名hash" data-v-70334359>webpack输出文件名Hash</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/my-front-end-learning/assets/js/app.58caa9e2.js" defer></script><script src="/my-front-end-learning/assets/js/3.41cb960d.js" defer></script><script src="/my-front-end-learning/assets/js/1.a4482675.js" defer></script><script src="/my-front-end-learning/assets/js/23.f12e7f74.js" defer></script>
  </body>
</html>
