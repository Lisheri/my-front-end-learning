<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>生产环境打包构建速度优化 | 小莫的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/my-front-end-learning/favicon.ico">
    <meta name="description" content="冲">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/my-front-end-learning/assets/css/0.styles.a5fc1f3a.css" as="style"><link rel="preload" href="/my-front-end-learning/assets/js/app.593dacd6.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/3.484b0080.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/1.ee48205b.js" as="script"><link rel="preload" href="/my-front-end-learning/assets/js/48.fbf8a615.js" as="script"><link rel="prefetch" href="/my-front-end-learning/assets/js/10.142ae3fd.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/100.44b905b1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/101.20e96842.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/102.95436e7b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/11.c42ed1bc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/12.4afe5b4a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/13.92040943.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/14.158ad455.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/15.cfc43538.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/16.38bda469.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/17.e4407a95.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/18.1660c08a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/19.a20339f7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/20.fc647d87.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/21.f487b446.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/22.51003e8e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/23.ba8d721b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/24.cda5cb77.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/25.6fadbf49.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/26.0bef8f12.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/27.27223644.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/28.ba649eb8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/29.6a8a852e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/30.4d6ee981.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/31.d52015ea.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/32.7457aef7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/33.03e2d3e3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/34.7b94ae96.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/35.b53cc573.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/36.76448006.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/37.67db1eb4.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/38.44e02fee.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/39.5632f088.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/4.89999855.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/40.6ba3a77a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/41.471f9160.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/42.54d6acf0.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/43.bd6db092.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/44.92f196ce.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/45.9b670b64.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/46.96e07f78.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/47.0dde5112.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/49.207fd0c0.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/5.b324dbbd.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/50.13c1343c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/51.4ff1065f.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/52.e1b4923d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/53.de065a83.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/54.a33ed481.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/55.a3fcc74d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/56.ddf4c7d3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/57.897fc0cb.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/58.f2e68805.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/59.bf0f09cc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/6.3cf77605.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/60.22e66437.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/61.54386740.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/62.aaa45a8e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/63.60f28ee1.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/64.cc77ac2e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/65.c801087c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/66.c4d2e8e3.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/67.ebc633d2.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/68.c7d58409.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/69.5308287d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/7.0b257ecd.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/70.f222c94f.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/71.b7f77b94.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/72.866439b6.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/73.a72cbc68.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/74.7f1df7e8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/75.ba1b3767.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/76.670b5c58.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/77.24af101e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/78.935979cc.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/79.086e670e.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/8.388ebb81.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/80.abd66f44.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/81.9611a643.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/82.11fdbe4d.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/83.ed8b0be7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/84.73347be9.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/85.29d13f70.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/86.006fe3ec.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/87.9565f739.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/88.57f1ba6b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/89.722e558c.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/9.7422c9a7.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/90.c19ab800.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/91.c6faa6a8.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/92.ae3cb20a.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/93.2cada52b.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/94.be5390b5.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/95.ea442e94.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/96.dae1be65.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/97.cfbd49d9.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/98.53163959.js"><link rel="prefetch" href="/my-front-end-learning/assets/js/99.b0cd3047.js">
    <link rel="stylesheet" href="/my-front-end-learning/assets/css/0.styles.a5fc1f3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>小莫的博客</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>冲</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Lisher</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-front-end-learning/" class="home-link router-link-active"><img src="/my-front-end-learning/logo.png" alt="小莫的博客" class="logo"> <span class="site-name">小莫的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-front-end-learning/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      目录
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ECMAScript6/" class="nav-link"><i class="undefined"></i>
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/函数式编程/" class="nav-link"><i class="undefined"></i>
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS异步编程/" class="nav-link"><i class="undefined"></i>
  JS异步编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端工程化/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端规范化标准/" class="nav-link"><i class="undefined"></i>
  前端规范化标准
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/webpack源码解析/" class="nav-link"><i class="undefined"></i>
  webpack源码解析
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS性能/" class="nav-link"><i class="undefined"></i>
  JS性能
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS类型系统/" class="nav-link"><i class="undefined"></i>
  JS类型系统
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li></ul></div></div><div class="nav-item"><a href="/my-front-end-learning/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/my-front-end-learning/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Lisheri" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  myGitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/my-front-end-learning/Lisher.jpeg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Lisher
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>91</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>18</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/my-front-end-learning/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      目录
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/ECMAScript6/" class="nav-link"><i class="undefined"></i>
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/函数式编程/" class="nav-link"><i class="undefined"></i>
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS异步编程/" class="nav-link"><i class="undefined"></i>
  JS异步编程
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端工程化/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/前端规范化标准/" class="nav-link"><i class="undefined"></i>
  前端规范化标准
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/webpack源码解析/" class="nav-link"><i class="undefined"></i>
  webpack源码解析
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS性能/" class="nav-link"><i class="undefined"></i>
  JS性能
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/JS类型系统/" class="nav-link"><i class="undefined"></i>
  JS类型系统
</a></li><li class="dropdown-item"><!----> <a href="/my-front-end-learning/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li></ul></div></div><div class="nav-item"><a href="/my-front-end-learning/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/my-front-end-learning/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Lisheri" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  myGitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模块化开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>webpack打包</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/1.html" class="sidebar-link">模块打包工具</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/2.html" class="sidebar-link">webpack快速上手</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/3.html" class="sidebar-link">webpack资源加载</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/4.html" class="sidebar-link">loader工作原理</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/5.html" class="sidebar-link">webpack-plugin</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/6.html" class="sidebar-link">webpack开发体验</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/7.html" class="sidebar-link">Source Map</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/8.html" class="sidebar-link">模块热更新</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html" class="sidebar-link">优化生产环境</a></li><li><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html" aria-current="page" class="active sidebar-link">生产环境打包构建速度优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Rollup上手</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Parcel上手</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>规范化标准</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack源码阅读</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>生产环境打包构建速度优化</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Lisher</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">生产环境打包构建速度优化</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Lisher</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>6/14/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>模块化</span><span class="tag-item" data-v-1ff7123e>webpack</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="构建速度优化"><a href="#构建速度优化" class="header-anchor">#</a> 构建速度优化</h1> <h2 id="speed-measure-webpack-plugin-插件打出插件和加载器的构建耗时"><a href="#speed-measure-webpack-plugin-插件打出插件和加载器的构建耗时" class="header-anchor">#</a> speed-measure-webpack-plugin 插件打出插件和加载器的构建耗时</h2> <p>本人当前目标优化项目二次耗时如下：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code> SMP  ⏱  
General output time took 10 mins, 41.93 secs

 SMP  ⏱  Plugins
IgnorePlugin took 1 min, 46.021 secs
TerserPlugin took 1 min, 19.61 secs
OptimizeCssAssetsWebpackPlugin took 24.63 secs
MiniCssExtractPlugin took 13.49 secs
ManifestPlugin took 1.29 secs
InlineChunkHtmlPlugin took 0.732 secs
InterpolateHtmlPlugin took 0.66 secs
DefinePlugin took 0.648 secs
ModuleNotFoundPlugin took 0.443 secs
HtmlWebpackPlugin took 0.039 secs

 SMP  ⏱  Loaders
cache-loader, and 
babel-loader took 3 mins, 54.72 secs
  module count = 2444
mini-css-extract-plugin, and 
cache-loader, and 
css-loader, and 
postcss-loader, and 
less-loader took 3 mins, 48.24 secs
  module count = 582
thread-loader, and 
babel-loader took 3 mins, 47.034 secs
  module count = 2147
cache-loader, and 
css-loader, and 
postcss-loader, and 
less-loader took 3 mins, 20.12 secs
  module count = 582
thread-loader, and 
style-loader, and 
mini-css-extract-plugin, and 
cache-loader, and 
css-loader, and 
postcss-loader, and 
less-loader took 2 mins, 28.16 secs
  module count = 582
url-loader took 37.36 secs
  module count = 132
mini-css-extract-plugin, and 
cache-loader, and 
css-loader, and 
postcss-loader took 9.34 secs
  module count = 9
cache-loader, and 
css-loader, and 
postcss-loader took 5.11 secs
  module count = 9
modules with no loaders took 4.74 secs
  module count = 54
thread-loader, and 
style-loader, and 
mini-css-extract-plugin, and 
cache-loader, and 
css-loader, and 
postcss-loader took 2.8 secs
  module count = 9
css-loader, and 
postcss-loader took 2.2 secs
  module count = 6
file-loader took 0.834 secs
  module count = 4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h2 id="优化方向"><a href="#优化方向" class="header-anchor">#</a> 优化方向</h2> <ul><li>babel-loader耗时过长, 需要优化</li> <li>代码压缩耗时过长</li> <li>忽略文件耗时过长</li> <li>生成.map文件耗时过长</li> <li>初始化打包时生成缓存文件耗时过长</li> <li>additional chunk assets processing阶段耗时过长(涉及到内存分配问题)</li> <li>各类loader, plugin版本过低, 不匹配webpack4.x, 导致速度过慢</li></ul> <h2 id="初次优化后的首次打包时间"><a href="#初次优化后的首次打包时间" class="header-anchor">#</a> 初次优化后的首次打包时间</h2> <div class="language-text line-numbers-mode"><pre class="language-text"><code> SMP  ⏱  
General output time took 8 mins, 28.92 secs

 SMP  ⏱  Plugins
TerserPlugin took 4 mins, 34.29 secs
OptimizeCssAssetsWebpackPlugin took 26.64 secs
WebpackBarPlugin took 15.019 secs
ManifestPlugin took 5.68 secs
MiniCssExtractPlugin took 1.13 secs
GenerateSW took 0.726 secs
InlineChunkHtmlPlugin took 0.38 secs
ModuleNotFoundPlugin took 0.318 secs
DefinePlugin took 0.304 secs
InterpolateHtmlPlugin took 0.301 secs
ContextReplacementPlugin took 0.295 secs
HtmlWebpackPlugin took 0.186 secs

 SMP  ⏱  Loaders
mini-css-extract-plugin, and 
css-loader, and 
postcss-loader, and 
less-loader took 2 mins, 50.5 secs
  module count = 582
css-loader, and 
postcss-loader, and 
less-loader took 2 mins, 50.47 secs
  module count = 582
thread-loader, and 
cache-loader, and 
babel-loader took 2 mins, 35.6 secs
  module count = 2147
modules with no loaders took 1 min, 37.23 secs
  module count = 3074
thread-loader, and 
cache-loader, and 
style-loader, and 
mini-css-extract-plugin, and 
css-loader, and 
postcss-loader, and 
less-loader took 1 min, 7.77 secs
  module count = 582
mini-css-extract-plugin, and 
css-loader, and 
postcss-loader took 18.29 secs
  module count = 2
url-loader took 17.009 secs
  module count = 132
css-loader, and 
postcss-loader took 16.23 secs
  module count = 2
file-loader took 2.66 secs
  module count = 11
thread-loader, and 
cache-loader, and 
style-loader, and 
mini-css-extract-plugin, and 
css-loader, and 
postcss-loader took 0.155 secs
  module count = 2
html-webpack-plugin took 0.028 secs
  module count = 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h2 id="优化方法"><a href="#优化方法" class="header-anchor">#</a> 优化方法</h2> <ul><li>babel-loader 查询范围缩小, 拒绝查询node_modules, 当然, 要除去其中有一个需要打包的文件, 这里采用的include</li> <li>TerserPlugin js代码压缩, 同样 exclude掉 <code>node_modules</code></li> <li>取消使用IgnorePlugin忽略moment.js, 换为<code>new MomentLocalesPlugin()</code>这个插件, 忽略掉除en以外的所有语言环境</li> <li>取消所有的cache-loader, 换效率更高的 <code>HardSourceWebpackPlugin</code>, 让二次打包下降到1min左右</li> <li>devtool使用cheap-source-map</li> <li>thread-loader下的线程池中并行的子线程数增大</li> <li>optimization下加强 <code>tree-shaking</code>, 打开生产环境下的 <code>usedExports</code>, 用于标记需要摇掉的&quot;树叶&quot;</li> <li>optimization下开启 Scope Hoisting, 也就是在生产环境下打开 <code>concatenateModules</code></li> <li>升级loader和plugin</li></ul> <h2 id="更进一步的提速"><a href="#更进一步的提速" class="header-anchor">#</a> 更进一步的提速</h2> <ol><li><p>升级到webpack5.x</p></li> <li><p>处理 <code>MiniCssExtractPlugin.loader</code> 后不调用style-loader报错的问题, 按理来说使用了<code>MiniCssExtractPlugin.loader</code>, 就不再需要style-loader了(使用了link, 也就不需要style标签植入了), 但是这里取消了style-loader会报错。</p></li> <li><p>new HardSourceWebpackPlugin.ParallelModulePlugin, 处理这个实验性质的模块导致的中断问题, 多线程环境下增加首次打包时生成缓存文件的速度。</p></li> <li><p>splitChunks拆分文件没有遵守minSize这个规则, 可能是其他地方影响了</p></li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/22/2021, 8:10:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/9.html" class="prev">
            优化生产环境
          </a></span> <span class="next"><a href="/my-front-end-learning/blogs/ModularDevelopment/Rollup/1.html">
            rollup学习
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html#speed-measure-webpack-plugin-插件打出插件和加载器的构建耗时" class="sidebar-link reco-side-speed-measure-webpack-plugin-插件打出插件和加载器的构建耗时" data-v-70334359>speed-measure-webpack-plugin 插件打出插件和加载器的构建耗时</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html#优化方向" class="sidebar-link reco-side-优化方向" data-v-70334359>优化方向</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html#初次优化后的首次打包时间" class="sidebar-link reco-side-初次优化后的首次打包时间" data-v-70334359>初次优化后的首次打包时间</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html#优化方法" class="sidebar-link reco-side-优化方法" data-v-70334359>优化方法</a></li><li class="level-2" data-v-70334359><a href="/my-front-end-learning/blogs/ModularDevelopment/WebpackStudy/10.html#更进一步的提速" class="sidebar-link reco-side-更进一步的提速" data-v-70334359>更进一步的提速</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/my-front-end-learning/assets/js/app.593dacd6.js" defer></script><script src="/my-front-end-learning/assets/js/3.484b0080.js" defer></script><script src="/my-front-end-learning/assets/js/1.ee48205b.js" defer></script><script src="/my-front-end-learning/assets/js/48.fbf8a615.js" defer></script>
  </body>
</html>
