---
title: Vue Router实现原理
date: 2021-09-08
tags:
    - vue
categories:
    - vue基础
---

# VueRouter原理剖析与实现

此处使用history模式来模拟实现, hash模式主要就是路径是以`#`开头, 他们的差异很小

需要使用到的一些Vue的知识

+ 插件
+ 混入
+ Vue.observable()
+ 插槽
+ render 函数
+ 运行时和完整版的Vue

## VueRouter的实现原理

VueRouter是前端路由, 当路径切换时, 在浏览器端判断当前路径, 并根据路径加载对应的组件

### Hash模式

+ URL 中 # 后面的内容作为路径地址
+ 监听 hashchange事件
+ 根据当前路由地址找到对应组件重新渲染

### History模式

+ 通过 history.pushState() 方法改变地址栏(他仅仅只是改变地址栏, 并把当前地址记录到当前浏览器的记录栈中, 并不会真正跳转到指定路径, 也就是不会发送对应的Get请求)
+ 监听 popstate 事件可以监听到浏览器历史操作的变化, 在 popstate事件的处理函数中, 可以记录改变后的地址(历史记录栈)
  > 注: 当调用`pushState`或者 `replaceState`并不会触发该事件, 当点击浏览器的前进或后退按钮时, 或者调用`history`的 `back`或`forward`方法时, 该事件才会被触发
+ 根据当前路由地址找到对应组件重新渲染

## VueRouter 模拟实现
